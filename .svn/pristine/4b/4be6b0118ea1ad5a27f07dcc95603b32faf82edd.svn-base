function initCitySwitch(){var t=new BMap.Map("m-map-baidu"),e={},a={},n={},i={},o=getScriptObj(".js-be-api").getStoreCoord,r=getScriptObj(".js-be-api").getStoreInfo,s=$(".js-map-wrap");$(".js-map-chosen").on("click",".js-item--chosen",function(){var c=$(this).data("city"),p=$(this).index();$.ajax({url:r,type:"post",dataType:"json",data:{}}).done(function(t){var e=rendStoreInfo(p,t.data);s.html(e)}),$.ajax({url:o,type:"post",dataType:"json",data:{city:c}}).done(function(o){var r=$(".js-item--target").find(".address").text();if(0===o.status){for(var s in o.data)e[c]=new BMap.Point(o.data[s].lot,o.data[s].lat);a[c]=new BMap.Marker(e[c]);var p={offset:new BMap.Size((-70),(-72)),style:{width:"120px",padding:"5px 10px",fontSize:"12px",color:"#fff",lineHeight:"18px",whiteSpace:"normal",backgroundColor:"rgba(75, 75, 75, 0.7)",border:"none",outline:"none",borderRadius:"5px"}};i[c]=r,n[c]=new BMap.Label(i[c],{position:e[c],offset:p.offset}),n.fuzhou.setStyle(p.style),t.centerAndZoom(e.fuzhou,15),t.addControl(new BMap.ScaleControl),t.enableScrollWheelZoom(!0),t.addOverlay(a[c]),t.panTo(e[c])}})})}function initSwitch(){new SwitchTabs({reference:".js-map-chosen",target:".js-map-target",referencesSelector:".js-item--chosen",targetsSelector:".js-item--target"})}function rendStoreInfo(t,e){var a="";return a+="<li class='item js-item--target'>",a+="<img  class='img' src='"+e[t].image+"'>",a+="<div class='txt'>",a+="<p class='icon'></p>",a+="<p class='address'><span>地址："+e[t].address+"</span></p>",a+="</div>",a+="</li>"}$(function(){initCitySwitch(),initSwitch()});